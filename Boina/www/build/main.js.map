{"version":3,"sources":["../../node_modules/@angular/core/@angular lazy","../../src/pages/signup/signup.ts","../../src/providers/auth.service.ts","../../src lazy","../../src/pages/home/home.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/providers/base.service.ts","../../src/providers/user.service.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\treturn new Promise(function(resolve, reject) { reject(new Error(\"Cannot find module '\" + req + \"'.\")); });\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 121;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/@angular lazy\n// module id = 121\n// module chunks = 0","import { HomePage } from './../home/home';\nimport { User } from './../../models/user.model';\nimport { AuthService } from './../../providers/auth.service';\nimport { UserService } from './../../providers/user.service';\nimport { Component } from '@angular/core';\nimport { NavController, NavParams, Loading, LoadingController, AlertController } from \"ionic-angular\";\nimport { FormGroup, FormBuilder, Validators } from \"@angular/forms\";\nimport { FirebaseAuthState } from \"angularfire2\";\nimport \"rxjs/add/operator/first\"\n\n\n@Component({\n  selector: 'page-signup',\n  templateUrl: 'signup.html',\n})\nexport class Signup {\n\n  signupForm: FormGroup;\n\n\n  constructor(\n    public alertCtrl: AlertController,\n    public authService: AuthService,\n    public formBuilder: FormBuilder,\n    public loadingCtrl: LoadingController,\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public userService: UserService) {\n\n    let emailRegex = /^[a-z0-9!#$%&'*+\\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i;\n\n    this.signupForm = this.formBuilder.group({\n      name: ['', [Validators.required, Validators.minLength(3)]],\n      username: ['', [Validators.required, Validators.minLength(6)]],\n      email: ['', Validators.compose([Validators.required, Validators.pattern(emailRegex)])],\n      password: ['', [Validators.required, Validators.minLength(6)]]\n    });\n\n  }\n\n  onSubmit(): void {\n    let loading: Loading = this.showLoading();\n    let formUser = this.signupForm.value;\n    let username: string = formUser.username;    \n    this.userService.userExists(username)\n      .first()  //poderia ser take(n) para recuperar n valores\n      .subscribe((userExists: boolean) => {\n\n        if (!userExists) {\n          this.authService.createAuthUser({\n            email: formUser.email,\n            password: formUser.password\n          }).then((authState: FirebaseAuthState) => {\n            delete formUser.password\n            formUser.uid = authState.auth.uid;\n\n            this.userService.create(formUser)\n              .then(() => {\n                console.log(\"Usuario cadastrado\");\n                loading.dismiss\n                \n              }).catch((erro: any) => {\n                console.log(erro);\n                loading.dismiss();\n                this.showAlert(erro);\n              });\n\n          }).catch((erro: any) => {\n            console.log(erro);\n            loading.dismiss();\n            this.showAlert(erro);\n\n          });\n                    \n        } else {\n          this.showAlert(`O username ${username} já está sendo usado, escolha outro`);\n          loading.dismiss();\n\n        }\n\n      });\n\n\n  }\n\n  private showLoading(): Loading {\n    let loading: Loading = this.loadingCtrl.create({\n      content: \"Please wait...\"\n    });\n\n    loading.present;\n\n    return loading;\n  }\n\n  private showAlert(message: string): void {\n    this.alertCtrl.create({\n      message: message,\n      buttons: [\"Ok\"]\n    }).present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts","\nimport { Injectable } from '@angular/core';\nimport { Http } from '@angular/http';\nimport 'rxjs/add/operator/map';\nimport { AngularFireAuth, FirebaseAuthState } from \"angularfire2\";\nimport { BaseService } from \"./base.service\";\n\n@Injectable()\nexport class AuthService extends BaseService {\n\n  constructor(\n    public auth: AngularFireAuth,\n    public http: Http) {\n    super();\n\n  }\n\n  createAuthUser(user: {email: string, password: string}): firebase.Promise<FirebaseAuthState>{\n    return this.auth.createUser(user)\n      .catch(this.handlePromiseError);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/auth.service.ts","function webpackEmptyAsyncContext(req) {\n\treturn new Promise(function(resolve, reject) { reject(new Error(\"Cannot find module '\" + req + \"'.\")); });\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 173;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 173\n// module chunks = 0","import { UserService } from './../../providers/user.service';\nimport { Component } from '@angular/core';\nimport { NavController } from 'ionic-angular';\n\nimport { FirebaseListObservable } from 'angularfire2';\n\nimport { Signup } from './../signup/signup';\nimport { User } from './../../models/user.model';\n\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class HomePage {\n\n  users: FirebaseListObservable<User[]>;\n\n  constructor(\n    public navCtrl: NavController,\n    public userService: UserService\n  ) {\n\n  }\n\n  ionViewDidLoad(){\n    this.users = this.userService.users;\n  }\n\n  onChatCreate(user){\n    console.log(user.username);\n  }\n\n  onSignup(): void{\n    this.navCtrl.push(Signup);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { Signup } from './../pages/signup/signup';\nimport { BrowserModule } from '@angular/platform-browser';\n\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport {HttpModule} from '@angular/http'\nimport { MyApp } from './app.component';\nimport { HomePage } from '../pages/home/home';\n\nimport { AngularFireModule , FirebaseAppConfig } from 'angularfire2';\nimport { UserService } from \"../providers/user.service\";\nimport { AuthService } from \"../providers/auth.service\";\n\n\n\nconst firebaseAppConfig: FirebaseAppConfig = {\n  \n    apiKey: \"AIzaSyAyM5pKzZGqIZOT2FZJKmxLCib3_MH61VQ\",\n    authDomain: \"boina-66b75.firebaseapp.com\",\n    databaseURL: \"https://boina-66b75.firebaseio.com\",\n    storageBucket: \"boina-66b75.appspot.com\",\n    messagingSenderId: \"435548578835\"\n\n};\n\n\n@NgModule({\n  declarations: [\n    MyApp,\n    HomePage,\n    Signup\n  ],\n  imports: [\n    BrowserModule,\n    HttpModule,\n    IonicModule.forRoot(MyApp),\n    AngularFireModule.initializeApp(firebaseAppConfig)\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    HomePage,\n    Signup\n  ],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    UserService,\n    AuthService,\n    {provide: ErrorHandler, useClass: IonicErrorHandler}\n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\nimport { Platform } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\nimport { HomePage } from '../pages/home/home';\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  rootPage:any = HomePage;\n\n  constructor(platform: Platform, statusBar: StatusBar, splashScreen: SplashScreen) {\n    platform.ready().then(() => {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      statusBar.styleDefault();\n      splashScreen.hide();\n    });\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { Response } from '@angular/http';\r\nimport { Observable } from 'rxjs';\r\n\r\nconst extractError = (error: Response | any): string => {\r\n    // In a real world app, we might use a remote logging infrastructure\r\n    let errMsg: string;\r\n    if (error instanceof Response) {\r\n        const body = error.json() || '';\r\n        const err = body.error || JSON.stringify(body);\r\n        errMsg = `${error.status} - ${error.statusText || ''} ${err}`;\r\n    } else {\r\n        errMsg = error.message ? error.message : error.toString();\r\n    }\r\n    console.error(errMsg);\r\n\r\n    return errMsg;\r\n}\r\n\r\nexport abstract class BaseService {\r\n\r\n    protected handlePromiseError(error: Response | any): Promise<any> {\r\n        return Promise.reject(extractError(error));\r\n    }\r\n\r\n    protected handleObservableError(error: Response | any): Observable<any> {\r\n        return Observable.throw(extractError(error));\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/base.service.ts","import { Injectable } from '@angular/core';\nimport { Http } from '@angular/http';\nimport 'rxjs/add/operator/map';\nimport { AngularFire, FirebaseListObservable } from \"angularfire2\";\nimport { User } from \"../models/user.model\";\nimport { BaseService } from \"./base.service\";\nimport { Observable } from \"rxjs\";\n\n\n@Injectable()\nexport class UserService extends BaseService {\n\n  users:FirebaseListObservable<User[]>\n\n  constructor(\n    public af: AngularFire,\n    public http: Http) {\n    super();\n    this.users = this.af.database.list('/users');\n    \n  }\n\n  create(user: User): firebase.Promise<void>{\n    return this.af.database.object(`/users/${user.uid}`)\n        .set(user)\n        .catch(this.handlePromiseError);\n  }\n\n  userExists(username: string): Observable<boolean>{\n     return this.af.database.list('/users', {\n      query: { \n        orderByChild: \"username\", \n        equalTo: username\n      } \n    }).map((users: User[]) =>{\n      return users.length > 0;\n      \n    }).catch(this.handleObservableError);\n    \n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/user.service.ts"],"sourceRoot":""}